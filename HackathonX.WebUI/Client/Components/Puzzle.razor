@using HackathonX.Service

<style>
  .puzzle-unit {
    width: 12.5rem;
    height: 8.5rem;
    background-color: #5ea1c4;
    border:0.01rem solid #653;
    box-shadow: 0.2rem 0.2rem 0.6rem 0.06rem #286382 inset;
    cursor: pointer;
    position: relative;
    font-size: 5rem;
    text-align: center;
  }
  .puzzle-unit:hover {
    box-shadow: 0.2rem 0.2rem 0.6rem 0.06rem #d1c732 inset;
    border: 0.01rem solid #d1c732;
  }
  .puzzle-unit.selected {
    background-color: #264d61;
    color: #dfdfdf;
    /*font-size: 5rem;
    text-align: center;*/
  }
  .flip {
    transition: transform 0.8s;
    transform-style: preserve-3d;
    transform: rotateY(180deg);
    /*font-size: 5rem;
    text-align: center;*/
  }
  .flip-box-front, .flip-box-back {
  position: absolute;
  width: 100%;
  height: 100%;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

.flip-box-front {
  /*background-color: #bbb;
  color: black;*/
}

.flip-box-back {
  background-color: #264d61;
  color: #dfdfdf;
  transform: rotateY(180deg);
}
</style>

@if (Questionnaire != null)
{
  var index = 0;

  foreach(var question in Questionnaire)
  {
    var st = question.Id == CurrentQuestion?.Id ? "selected" : "";
    var t = question.Answered ? "flip" : "";
    <div class="puzzle-unit @st @t" @onclick="(async () => await QuestionSelected.InvokeAsync(question.Id))">
      <div class="flip-box-front">
        @(question.Id == CurrentQuestion?.Id ? question.Score : "?")
      </div>
      <div class="flip-box-back">
        @((question.Iscorrect && !string.IsNullOrEmpty(BonusWord)) ? BonusWord[index] : "*")
      </div>
    </div>
    index++;
  }
}

@code {
  [Parameter] public Question? CurrentQuestion { get; set; }
  [Parameter] public IEnumerable<Question>? Questionnaire { get; set; }
  [Parameter] public EventCallback<int?> QuestionSelected { get; set; }
  [Parameter] public string? BonusWord { get; set; }
}
