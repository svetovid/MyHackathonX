@page "/game"

<PageTitle>Counter</PageTitle>

<style>
  .game-status {
    text-align:center;
    display: flex;
    padding: 1rem;
    background-color: #f7f7f7;
    border: .1rem solid #d6d5d5;
    border-radius: 1rem;
    margin: 1rem;
  }

  .game-status .timer {
    flex-grow: 1;
  }

  .game-status .user-name {
    flex-grow: 4;
  }

  .game-status .score {
    flex-grow: 1;
  }

  .battlefield {
    display: flex;
    margin: 1rem;
  }

  .questionnaire {
    width: 25rem;
  }
  .puzzle {
    width: 38.5rem;
    height: 25rem;
    display: flex;
    flex-wrap: wrap;
  }

  .form-group {
    margin: 1rem;
  }

  .finish {
      text-align: center;
  }
  .finish-btn {
      width: 50%;
  }
</style>

@if (_user == null || _questionnaire == null)
{
  <p><em>Loading...</em></p>
}
else
{
  <GameStatus CurrentUser="_user" Score="_score" TimeCounter="_timeCounter"/>
  <div class="battlefield">
    <div class="questionnaire">
        <QuestionnaireForm CurrentQuestion="_currentQuestion" AbsencePlanSubmitted="AnswerTheQuestion" />
    </div>
    <div class="puzzle">
        <Puzzle CurrentQuestion="_currentQuestion" Questionnaire="_questionnaire" QuestionSelected="SelectPuzzle" BonusWord="@_bonusWord" />
    </div>
  </div>
  @if (QuestFinished)
  {
    <BonusQuestion BonusAnswered="BonusQuestionAnswered" />
    <div class="finish">
      <button class="btn btn-primary finish-btn" onclick="@Finish">Finish and see results</button>
    </div>
  }
}
